{
  "Создать динамическую библиотеку в CMake": {
    "prefix": "ivs_cmake_shared",
    "body": [
      "cmake_minimum_required (VERSION 2.8)",
      "project (${1:project_name})",
      "set(IVOUTPUT_RELATIVE_DIRECTORY ${2:plugins})",
      "",
      "if(EXISTS \"${CMAKE_BINARY_DIR\\}/conanbuildinfo.cmake\")",
      "    include(${CMAKE_BINARY_DIR\\}/conanbuildinfo.cmake)",
      "    set(IVCONAN_USING TRUE)",
      "elseif(EXISTS \"${CMAKE_SOURCE_DIR\\}/conanbuildinfo.cmake\")",
      "    include(${CMAKE_SOURCE_DIR\\}/conanbuildinfo.cmake)",
      "    set(IVCONAN_USING TRUE)",
      "elseif(EXISTS \"${CMAKE_SOURCE_DIR\\}/build/conanbuildinfo.cmake\")",
      "    include(${CMAKE_SOURCE_DIR\\}/build/conanbuildinfo.cmake)    ",
      "    set(IVCONAN_USING TRUE)    ",
      "endif()",
      "if(DEFINED IVCONAN_USING)",
      "    conan_basic_setup()",
      "endif()",
      "",
      "get_filename_component(IVBUILD_DIR \"${CMAKE_BINARY_DIR\\}/../${IVOUTPUT_RELATIVE_DIRECTORY\\}\" ABSOLUTE)",
      "",
      "set(CMAKE_RUNTIME_OUTPUT_DIRECTORY ${IVBUILD_DIR\\})",
      "set(CMAKE_LIBRARY_OUTPUT_DIRECTORY ${IVBUILD_DIR\\})",
      "set(CMAKE_ARCHIVE_OUTPUT_DIRECTORY ${IVBUILD_DIR\\})",
      "set(CMAKE_LIBRARY_OUTPUT_DIRECTORY_RELEASE ${CMAKE_LIBRARY_OUTPUT_DIRECTORY\\})",
      "set(CMAKE_LIBRARY_OUTPUT_DIRECTORY_DEBUG ${CMAKE_LIBRARY_OUTPUT_DIRECTORY\\})",
      "set(CMAKE_RUNTIME_OUTPUT_DIRECTORY_RELEASE ${CMAKE_RUNTIME_OUTPUT_DIRECTORY\\})",
      "set(CMAKE_RUNTIME_OUTPUT_DIRECTORY_DEBUG   ${CMAKE_RUNTIME_OUTPUT_DIRECTORY\\})",
      "set(CMAKE_ARCHIVE_OUTPUT_DIRECTORY_RELEASE ${CMAKE_ARCHIVE_OUTPUT_DIRECTORY\\})",
      "set(CMAKE_ARCHIVE_OUTPUT_DIRECTORY_DEBUG   ${CMAKE_ARCHIVE_OUTPUT_DIRECTORY\\})",
      "",
      "file(GLOB_RECURSE sources lib/*.cpp)",
      "",
      "add_library(${PROJECT_NAME\\} SHARED ${sources\\})",
      "",
      "target_include_directories(${PROJECT_NAME\\} PUBLIC \"${CMAKE_SOURCE_DIR\\}/inc\"",
      "    \"${CMAKE_SOURCE_DIR\\}/lib\")",
      "",
      "if(MSVC)",
      "    file(GLOB_RECURSE sources lib/*.rc)",
      "    set(DEPS_LIBS winmm)",
      "",
      "# компилятор(общие)",
      "",
      "    set(CMAKE_CXX_FLAGS \"${CMAKE_CXX_FLAGS\\} /Zi\") # формат отладочной информации",
      "",
      "    set(CMAKE_CXX_FLAGS \"${CMAKE_CXX_FLAGS\\} /W4\") # уровень предупреждений",
      "",
      "    set(CMAKE_CXX_FLAGS \"${CMAKE_CXX_FLAGS\\} /WX\") # обрабатывать предупреждения как ошибки",
      "",
      "    set(CMAKE_CXX_FLAGS \"${CMAKE_CXX_FLAGS\\} /MP\") # многопроцессорная компиляция",
      "",
      "# компилятор(оптимизация)",
      "",
      "    set(CMAKE_CXX_FLAGS \"${CMAKE_CXX_FLAGS\\} /Od\") # оптимизация",
      "",
      "    set(CMAKE_CXX_FLAGS \"${CMAKE_CXX_FLAGS\\} /Os\") # предпочитать размер или скорость",
      "",
      "    set(CMAKE_CXX_FLAGS \"${CMAKE_CXX_FLAGS\\} /Oy-\") # опустить указатели на фреймы",
      "",
      "    #set(CMAKE_CXX_FLAGS \"${CMAKE_CXX_FLAGS\\} /GL\") # оптимизация всей программы",
      "",
      "# компилятор(создание кода)",
      "",
      "    set(CMAKE_CXX_FLAGS \"${CMAKE_CXX_FLAGS\\} /GF-\") # включить объединение строк",
      "    ",
      "    set(CMAKE_CXX_FLAGS \"${CMAKE_CXX_FLAGS\\} /Gm-\") # включить минимальное перестроение",
      "",
      "    set(CMAKE_CXX_FLAGS \"${CMAKE_CXX_FLAGS\\} /EHsc\") # включить C++ исключения",
      "",
      "    if(DEFINED IVCONAN_USING)",
      "        message(\"conan.io is using\")",
      "    else()",
      "        #set(CMAKE_CXX_FLAGS_RELEASE \"${CMAKE_CXX_FLAGS_RELEASE\\} /MD\")",
      "        #set(CMAKE_CXX_FLAGS_DEBUG \"${CMAKE_CXX_FLAGS_DEBUG\\} /MDd\")",
      "        set(CMAKE_CXX_FLAGS \"${CMAKE_CXX_FLAGS\\} /MD\") # библиотека времени выполнения",
      "    endif()",
      "",
      "    set(CMAKE_CXX_FLAGS \"${CMAKE_CXX_FLAGS\\} /GS\") # проверка переполнения буфера",
      "",
      "    set(CMAKE_CXX_FLAGS \"${CMAKE_CXX_FLAGS\\} /Gy\") # включить компоновку на уровне функций",
      "",
      "    set(CMAKE_CXX_FLAGS \"${CMAKE_CXX_FLAGS\\} /fp:precise\") # модель вычислений с плавающей точкой",
      "",
      "# компилятор(язык)",
      "    set(CMAKE_CXX_FLAGS \"${CMAKE_CXX_FLAGS\\} /Zc:wchar_t\") # считать wchar_t встроенным типом",
      "",
      "    set(CMAKE_CXX_FLAGS \"${CMAKE_CXX_FLAGS\\} /Zc:forScope\") # обеспечение согласованности видимости переменных, объявленных в заголовке оператора for",
      "# компилятор(дополнительно)",
      "    set(CMAKE_CXX_FLAGS \"${CMAKE_CXX_FLAGS\\} /Gd\") # соглашение о вызовах",
      "",
      "    set(CMAKE_CXX_FLAGS \"${CMAKE_CXX_FLAGS\\} /wd4714\") # отключить некоторые предупреждения",
      "",
      "# компоновщик(общие)",
      "    set(CMAKE_SHARED_LINKER_FLAGS \"${CMAKE_SHARED_LINKER_FLAGS\\} /INCREMENTAL:NO\") # включить инкрементную компоновку",
      "# компоновщик(отладка)",
      "    set(CMAKE_SHARED_LINKER_FLAGS \"${CMAKE_SHARED_LINKER_FLAGS\\} /DEBUG\") # включить инкрементную компоновку",
      "# компоновщик(оптимизация)",
      "    set(CMAKE_SHARED_LINKER_FLAGS \"${CMAKE_SHARED_LINKER_FLAGS\\} /OPT:NOREF\") # ссылки",
      "",
      "    set(CMAKE_SHARED_LINKER_FLAGS \"${CMAKE_SHARED_LINKER_FLAGS\\} /OPT:NOICF\") # включить свертывание записей COMDAT",
      "else()",
      "    set(DEPS_LIBS \"pthread\" \"dl\" \"rt\")",
      "    set(CMAKE_CXX_FLAGS \"${CMAKE_CXX_FLAGS\\} -Wunused-parameter -Wunused-variable -Wreturn-type -Werror -Wno-error=stringop-overflow= -g -fvisibility=hidden -ffunction-sections -fdata-sections\")",
      "    set(CMAKE_SHARED_LINKER_FLAGS \"${CMAKE_SHARED_LINKER_FLAGS\\} -shared -fPIC -Wl,-E,--no-undefined,-O0,-flto,--gc-sections,-R,'$$ORIGIN',-R,'$ORIGIN',--build-id=sha1\")",
      "endif()",
      "",
      "include_directories(\"${CMAKE_BINARY_DIR\\}/inc/\" \"${CMAKE_BINARY_DIR\\}/include/fbs/${1:project_name}/\")",
      "",
      "target_link_libraries(${PROJECT_NAME\\} ${DEPS_LIBS\\})"
    ],
    "description": "Создать динамическую библиотеку в CMake"
  },
  "Создать тестовой приложение в CMake": {
    "prefix": "ivs_cmake_test_package",
    "body": [
      "cmake_minimum_required(VERSION 3.0.2)",
      "project(test_package)",
      "",
      "get_filename_component(BUILD_DIR \"${CMAKE_BINARY_DIR\\}/bin\" ABSOLUTE)",
      "",
      "set(CMAKE_POSITION_INDEPENDENT_CODE ON)",
      "set(CMAKE_RUNTIME_OUTPUT_DIRECTORY ${BUILD_DIR\\})",
      "set(CMAKE_ARCHIVE_OUTPUT_DIRECTORY ${BUILD_DIR\\})",
      "set(CMAKE_LIBRARY_OUTPUT_DIRECTORY ${BUILD_DIR\\})",
      "set(CMAKE_RUNTIME_OUTPUT_DIRECTORY_RELEASE          ${CMAKE_RUNTIME_OUTPUT_DIRECTORY\\})",
      "set(CMAKE_RUNTIME_OUTPUT_DIRECTORY_RELWITHDEBINFO   ${CMAKE_RUNTIME_OUTPUT_DIRECTORY\\})",
      "set(CMAKE_RUNTIME_OUTPUT_DIRECTORY_MINSIZEREL       ${CMAKE_RUNTIME_OUTPUT_DIRECTORY\\})",
      "set(CMAKE_RUNTIME_OUTPUT_DIRECTORY_DEBUG            ${CMAKE_RUNTIME_OUTPUT_DIRECTORY\\})",
      "set(CMAKE_ARCHIVE_OUTPUT_DIRECTORY_RELEASE          ${CMAKE_ARCHIVE_OUTPUT_DIRECTORY\\})",
      "set(CMAKE_ARCHIVE_OUTPUT_DIRECTORY_RELWITHDEBINFO   ${CMAKE_ARCHIVE_OUTPUT_DIRECTORY\\})",
      "set(CMAKE_ARCHIVE_OUTPUT_DIRECTORY_MINSIZEREL       ${CMAKE_ARCHIVE_OUTPUT_DIRECTORY\\})",
      "set(CMAKE_ARCHIVE_OUTPUT_DIRECTORY_DEBUG            ${CMAKE_ARCHIVE_OUTPUT_DIRECTORY\\})",
      "set(CMAKE_LIBRARY_OUTPUT_DIRECTORY_RELEASE          ${CMAKE_LIBRARY_OUTPUT_DIRECTORY\\})",
      "set(CMAKE_LIBRARY_OUTPUT_DIRECTORY_RELWITHDEBINFO   ${CMAKE_LIBRARY_OUTPUT_DIRECTORY\\})",
      "set(CMAKE_LIBRARY_OUTPUT_DIRECTORY_MINSIZEREL       ${CMAKE_LIBRARY_OUTPUT_DIRECTORY\\})",
      "set(CMAKE_LIBRARY_OUTPUT_DIRECTORY_DEBUG            ${CMAKE_LIBRARY_OUTPUT_DIRECTORY\\})",
      "",
      "include_directories(\"${CMAKE_BINARY_DIR\\}/include/\")",
      "link_directories(\"${CMAKE_BINARY_DIR\\}/bin/lib/\" \"${CMAKE_BINARY_DIR\\}/libs/\")",
      "",
      "file(GLOB PROJECT_SRC     ",
      "    \"${CMAKE_CURRENT_SOURCE_DIR\\}/*.cpp\"",
      ")",
      "",
      "add_executable(${PROJECT_NAME\\} ${PROJECT_SRC\\})",
      "",
      "if(MSVC)",
      "    target_compile_options(${PROJECT_NAME\\} PRIVATE /Z7 /MP8)",
      "    target_link_libraries(${PROJECT_NAME\\} winmm)",
      "else()",
      "    target_compile_options(${PROJECT_NAME\\} PRIVATE \"$<$<CONFIG:DEBUG>:-gdwarf-2>\" -Wunused-parameter -Wunused-variable -Wreturn-type -Werror -Wno-error=stringop-overflow=)",
      "    target_link_libraries(${PROJECT_NAME\\} pthread dl rt)",
      "endif()",
      "",
      "",
      "add_test(NAME ${PROJECT_NAME\\} COMMAND ${PROJECT_NAME\\})"
    ],
    "description": ""
  }
}